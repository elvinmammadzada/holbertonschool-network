#!/usr/bin/env bash
# File: 0-change_your_home_IP
# Description: Safely change localhost to 127.0.0.2 and facebook.com to 8.8.8.8

HOSTS_FILE="/etc/hosts"
TMP_FILE="/tmp/hosts.tmp"

# 1. localhost IPv4 dəyiş
sudo awk '{
    if($1=="127.0.0.1" && $2=="localhost") $1="127.0.0.2"
    print
}' "$HOSTS_FILE" > "$TMP_FILE"

# 2. facebook.com üçün sətri əlavə et və ya dəyişdir
if grep -q "facebook.com" "$TMP_FILE"; then
    sudo sed -i 's/.*facebook\.com/8.8.8.8 facebook.com/' "$TMP_FILE"
else
    echo "8.8.8.8 facebook.com" | sudo tee -a "$TMP_FILE" > /dev/null
fi

# 3. Müvəqqəti faylı əsl /etc/hosts ilə əvəz et
sudo cp "$TMP_FILE" "$HOSTS_FILE"
sudo rm "$TMP_FILE"
